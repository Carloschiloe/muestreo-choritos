<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Muestreo de Choritos</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 600px;
            margin: auto;
        }
        .form-group {
            margin-bottom: 15px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .info-section {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: #f8f9fa;
            padding: 10px;
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .floating-window {
            position: fixed;
            top: 200px;
            right: 20px;
            width: 180px;
            padding: 10px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .logo {
            display: block;
            margin: 0 auto 20px;
            max-width: 100px;
        }
        .microphone-btn {
            margin-top: 10px;
            background-color: #ff9800;
            color: white;
            border: none;
            padding: 8px 15px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="Imagenes/camanchaca.png" alt="Logo de la Empresa" class="logo">
        <h1 class="text-center">Registro de Muestreo de Choritos</h1>
        <div class="text-center mb-4">
            <p>Fecha: <span id="fecha"></span> | Hora: <span id="hora"></span> | Temperatura: <span id="temperatura">N/A</span> 춿C</p>
        </div>
        <button type="button" class="btn btn-primary" onclick="copyLastSample()">Copiar 칔ltimo Muestreo</button>
        <form id="muestreoForm" enctype="multipart/form-data">
            <div class="form-group">
                <label for="centro">Nombre Centro de Cultivo:</label>
                <input type="text" class="form-control" id="centro" name="centro" required>
                <button type="button" class="microphone-btn" onclick="startDictation('centro')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="linea">N춿 de L칤nea:</label>
                <input type="number" class="form-control" id="linea" name="linea" required>
                <button type="button" class="microphone-btn" onclick="startDictation('linea')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="plataforma">Nombre Plataforma:</label>
                <input type="text" class="form-control" id="plataforma" name="plataforma" required>
                <button type="button" class="microphone-btn" onclick="startDictation('plataforma')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="tipoMuestreo">Tipo de Muestreo:</label>
                <select class="form-control" id="tipoMuestreo" name="tipoMuestreo" required onchange="updateUnits()">
                    <option value="unidades">Unidades</option>
                    <option value="peso">Peso</option>
                </select>
                <button type="button" class="microphone-btn" onclick="startDictation('tipoMuestreo')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="total">Muestra Total:</label>
                <input type="number" class="form-control" id="total" name="total" required>
                <button type="button" class="microphone-btn" onclick="startDictation('total')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="rotos">Rotos:</label>
                <input type="number" class="form-control" id="rotos" name="rotos" required oninput="calculatePercentage()">
                <button type="button" class="microphone-btn" onclick="startDictation('rotos')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="trizados">Trizados:</label>
                <input type="number" class="form-control" id="trizados" name="trizados" required oninput="calculatePercentage()">
                <button type="button" class="microphone-btn" onclick="startDictation('trizados')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="cholgas">Cholgas:</label>
                <input type="number" class="form-control" id="cholgas" name="cholgas" required oninput="calculatePercentage()">
                <button type="button" class="microphone-btn" onclick="startDictation('cholgas')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="malton">Malton:</label>
                <input type="number" class="form-control" id="malton" name="malton" required oninput="calculatePercentage()">
                <button type="button" class="microphone-btn" onclick="startDictation('malton')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="picorocos">Picorocos:</label>
                <input type="number" class="form-control" id="picorocos" name="picorocos" required oninput="calculatePercentage()">
                <button type="button" class="microphone-btn" onclick="startDictation('picorocos')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="otros">Otros:</label>
                <input type="number" class="form-control" id="otros" name="otros" required oninput="calculatePercentage()">
                <button type="button" class="microphone-btn" onclick="startDictation('otros')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="observaciones">Observaciones:</label>
                <textarea class="form-control" id="observaciones" name="observaciones"></textarea>
                <button type="button" class="microphone-btn" onclick="startDictation('observaciones')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="responsable">Responsable:</label>
                <input type="text" class="form-control" id="responsable" name="responsable" required>
                <button type="button" class="microphone-btn" onclick="startDictation('responsable')">游꿗</button>
            </div>
            <div class="form-group">
                <label for="foto">Abrir C치mara:</label>
                <input type="file" class="form-control" id="foto" name="foto" accept="image/*" capture="environment">
            </div>
            <!-- Campos ocultos para registrar la fecha, hora y temperatura -->
            <input type="hidden" id="hiddenFecha" name="fecha">
            <input type="hidden" id="hiddenHora" name="hora">
            <input type="hidden" id="hiddenTemperatura" name="temperatura">

            <button type="submit" class="btn btn-success">Registrar</button>
        </form>

        <a href="resumen.html" class="btn btn-info mt-4">Ver Resumen de Resultados</a>
    </div>

    <div class="floating-window">
        <h4>Resultados en Tiempo Real</h4>
        <p>Rotos: <span id="resultadoRotos">0</span>%</p>
        <p>Trizados: <span id="resultadoTrizados">0</span>%</p>
        <p>Cholgas: <span id="resultadoCholgas">0</span>%</p>
        <p>Malton: <span id="resultadoMalton">0</span>%</p>
        <p>Picorocos: <span id="resultadoPicorocos">0</span>%</p>
        <p>Otros: <span id="resultadoOtros">0</span>%</p>
        <p>% Choritos: <span id="resultadoChoritos">0</span>%</p>
    </div>

    <script>
        // Funci칩n para dictado por voz
        function startDictation(fieldId) {
            if (window.SpeechRecognition || window.webkitSpeechRecognition) {
                const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.lang = 'es-CL'; // Espa침ol Chile

                recognition.onresult = function(event) {
                    const result = event.results[0][0].transcript;
                    document.getElementById(fieldId).value = result;
                };

                recognition.start();
            } else {
                alert('Lo siento, tu navegador no soporta reconocimiento de voz.');
            }
        }

        // Funciones adicionales para la l칩gica del formulario
        window.onload = function() {
            const now = new Date();
            document.getElementById('fecha').textContent = now.toLocaleDateString();
            document.getElementById('hora').textContent = now.toLocaleTimeString();
            // ... (l칩gica para actualizar temperatura y otros datos)
        };
    </script>
</body>
</html>



























